= TravelPal - User Guide
:site-section: UserGuide
:toc:
:toc-title:
:toc-placement: preamble
:sectnums:
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
:experimental:
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
endif::[]
:repoURL: https://github.com/se-edu/addressbook-level3

By: `Team 11-4`      Since: `In Development`      Licence: `None`

== Introduction
What is TravelPal? First and foremost, it is a cross-platform desktop application for those who love to plan and micromanage their travels. It includes various features to help in planning the trip beforehand, such as an itinerary planner, a pre-trip inventory manager, bookings and expense manager. During the trip, there is also an inbuilt diary application that allows the user to record details of the trip, and a contacts manager to store important contacts related to the trip. In addition, it’s primary preferred form of input from the user is the Command Line Interface (CLI), but it also provides a Graphical User Interface (GUI) for those who like to use alternative inputs, such as a mouse. Jump to the <<Quick Start>> to get started!

== Quick Start

.  Ensure you have Java `11` or above installed in your Computer.
.  Download the latest `addressbook.jar` link:{repoURL}/releases[here].
.  Copy the file to the folder you want to use as the home folder for your Address Book.
.  Double-click the file to start the app. The GUI should appear in a few seconds.
+
image::Ui.png[width="790"]
+
.  Type the command in the command box and press kbd:[Enter] to execute it. +
e.g. typing *`help`* and pressing kbd:[Enter] will open the help window.
.  Some example commands you can try:

* *`list`* : lists all contacts
* **`add`**`n/John Doe p/98765432 e/johnd@example.com a/John street, block 123, #01-01` : adds a contact named `John Doe` to the Address Book.
* **`delete`**`3` : deletes the 3rd contact shown in the current list
* *`exit`* : exits the app

.  Refer to <<Features>> for details of each command.

[[Features]]
== Features

====
*General Command tips*

* Most commands are in the format of <command> <argument1> <argument2> <...>.
** <command> is case insensitive, so typing it in any combination of UPPER_CASE or lower_case will work.
** When an argument is optional, it will be tagged be enclosed in square brackets [...] instead of angle brackets <...>
** When required, a separator / delimiter between arguments will be displayed with *separator*.
* Commands support tab-autocomplete when appropriate.
** Autocompletion for commands : For example, typing he then pressing tab will autocomplete the command to help.
**Autocompletion for separators : When a command requires a separator, and the command name is already in the text input, pressing tab again will append the separator automatically.
* Commands help popup
** Once the command name is already in the text input, a handy, non-intrusive popup will appear slightly above the text input.
** You can disable this feature in the user preferences.
* Leading and trailing white spaces in the inputted command are ignored.

====

=== General commands

* help : brings a pdf version of the user guide
* goto <page> : all navigation between pages in the app follows this format. <page> will be detailed in each of the relevant sections
* undo : this will undo the last undoable operation attempted by the user, prompting the user with the details of the operation first.
* exit : this will exit the program, discarding any unsaved changes.

=== User preferences

* To access the user preferences gui, you can :
** Click the user icon in the top right of the app
** Type the command “preferences”
* To change preferences, you can :
** As per the user interface, you can click on various fields and edit them.
** Use the command edit <field> <value>, where field is the field you want to edit as shown in the interface, and value is the respective value for the field, as detailed below.
* Types of fields :
** Checkboxes & toggles : edit <field> will toggle the current value of the checkbox
** Text fields : edit <field> <value> will change the value of the checkbox to the new value specified.
** Dropdowns :
*** To see the available options for a dropdown, first type edit <field>
*** To change the value, type edit <field> <value>, where <value> is one of the options shown, or the number of the option in the order in which they were shown.

=== Trip manager

The trip manager is the main starting ground of the application. Here, the user is able to create, delete and archive trips. There is also an archive section, where the archived trips are displayed exclusively.

* create <name of trip> : creates a new trip with specified name, then bringing up the trip creation user interface.
* delete <name of trip> *yes_i_am_sure* : deletes the trip with the specified name and all data associated with it.
* archive <name of trip> : moves the trip to the archive section of the trip manager.
* goto <name of trip> : enters the main day-by-day view of the trip.

=== Trip setup

Trip setup is the first page in configuring a new/existing task. Upon commands to create or edit a specified trip from the Trip Manager, the user will be directed to a page where they can edit the necessary details to create a new trip. This page will contain a form with 2 necessary fields:

1. Duration (Starting date, Ending date)
2. Destination

* edit -startDate <starting Date> -endDate <ending Date>: sets the starting date and ending date of the trip being created/edited
* edit -dest <destination>: sets the destination of the trip being created/edited
* edit -addDay <name of day>: adds a day after the last day previously added. If no days were previously added, add the first day

=== Event Setup

Event setup creates/edits properties of a specified event. It is necessary for event to contains a starting and ending time. Events contains mostly optional fields that the user can edit in future

* edit -id <id of trip> -day <index of day> -event <index of event> -name <name of event>: sets the name of the event
* edit -id <id of trip> -day <index of day> -event <index of event> -description <description of event>: sets the description of the event
* edit -id <id of trip> -day <index of day> -event <index of event> -startDate <starting time>: sets the starting time of the event
* edit -id <id of trip> -day <index of day> -event <index of event> -endingTime <ending time>: sets the ending time of the event
* edit -id <id of trip> -day <index of day> -event <index of event> -expenditure: sets the current known expenditure for a single event

=== Itinerary

tinerary contains commands to view the list of relevant event/day/trips. The order can be changed by using different commands

* list -id <id of trip>: Lists the days of a trip in chronological order
* list -d <id of trip> -day <index of day>: Lists the events of a day chronological order

Additional tags:
* byExpenses: list all elements by expenses, from highest to lowest
* byAlphabetical: list all elements by the alphabetical order of their names

=== Expense Manager

Expense manager records the expenditure by the user. Expenses are connected to bookings/events to automatically update the current known expenditure for any date/trip/event. There are two types of expenditure: 1. Planned expenditure 2. Miscellaneous/Unplanned expenditure

* edit -id <id of trip> -day <index of day> -event <index of event> -spend <amount spent>: sets the total amount spent during an event which was unplanned
* edit -id <id of trip> -day <index of day> -spent <amount spent>: sets the total: sets the total amount spent during a day which was not planned

Additional tags:
* time <time of expense>: time which the expenditure occurred

=== Bookings Manager

Bookings manager manages bookings and reservations made by the user. The bookings under this feature include hotel reservations and transport bookings (flight, train and bus).

* edit -id <id of trip> -booking <index of booking> -name <name of booking>: sets the name of the booking
* edit -id <id of trip> -booking <index of booking> -description <description of booking>: sets the description of the booking
* edit -id <id of trip> -booking <index of booking> -from <check-in time/date>: sets the starting date and time of a hotel booking
* edit -id <id of trip> -booking <index of booking> -to <check-out time/date>: sets the ending date and time of a hotel booking
* edit -id <id of trip> -booking <index of booking> -time <departure time>: sets the departure time of a transport booking
* edit -id <id of trip> -booking <index of booking> -expenditure: sets the known expenditure of a booking


=== Diary

==== Introduction

Welcome to the diary feature of _TravelPal_! The diary allows you to key in various thoughts and add photos that tie
to each day of the trip. It offers a selection of formatting choices for your text display, and has an
additional gallery display to the right that allows you to take a glance at all your photos quickly. Moreover, for almost
every command, there are gui alternatives that allow you to execute the same operations.

This section of the user guide explains how to use the diary.

==== Diary User Interface Overview

Shown below are the key elements of the diary page, while the gallery is in view.

NOTE: There is an alternative mode of display (which will be touched on shortly, or see <<diary_editor_display_mode>>),
that shows when you execute the `editor` command <<diary_editor_command>> or click the `Edit` button.

image::diary/userguide/welcome_to_diary_image_annotated.png[title="Overview of diary user interface"]

===== Diary Entry Display Area
This is the main display area of your diary entry. It is able to display text, along with inline images, or just lines of
images. The content is generated from the diary text of the entry (<<diary_text_info>>).

[[diary_gallery_display]]
===== Gallery Display
The gallery allows you to browse through your stored photos. You can scroll the list simply with your mouse wheel.

image::diary/userguide/diary_photo_user_interface.png[title="Display of a photo in the gallery display"]

Each image is displayed with a description (bottom left), a date taken (top right) and a auto generated index (top left).

===== Diary Day Navigation Bar
This is the button equivalent of the `flip` command (<<diary_flip_command>>), and allows you to navigate between your
diary entries for different days by clicking on the respective buttons.

[[diary_gallery_button_bar]]
===== Gallery Button Bar
This smaller button bar is used for executing two other commands. Firstly, the `editor` (<<diary_editor_command>>)
can be executede by clicking on the _Edit_ button. Secondly, the `addphoto` command may be executed
(<<diary_addphoto_command>>) through _Add_ button.

===== Add New Entry Button
Similarly, this button executes the `create` command (<<diary_create_entry_command>>) through the user interface.

[[diary_editor_display_mode]]
==== Diary Editor User Interface

This is the screen that shows when the `editor` command (<<diary_editor_command>>) is executed or the _Edit_ button
is clicked, as mentioned in <<diary_gallery_button_bar>>.

Components not highlighted in <<diary_edit_view_annotated>> below function the same way as mentioned in
<<Diary User Interface Overview>>.

[[diary_edit_view_annotated]]
image::diary/userguide/diary_edit_view_annotated.png[title="Overview of diary user interface when the edit box is shown"]

===== Diary Edit Box
This is the text edit area that allows a convenient form of alternative input to commands for editing the Diary Entry.
While you may feel that the special clauses _"<images 2>"_ and _"<images 5 1 3 4>"_ being used in the diagram above are
rather unfamiliar, they are actually quite simple! (see <<Diary Text>>).

TIP: For the command line input savvy users, you can use the `F1` accelerator to quickly move your keyboard focus
back to the command line input!

===== Commit Edit Button
This is simply the button-equivalent of the `done` command (<<diary_done_command>>), and allows you to commit the
changes you made (either through commands, or directly in the edit box) while the edit box was open.

[[diary_text_info]]
==== Diary Text

The **diary text**, as you edit in the edit box (<<Diary Edit Box>>), or edit through the commands described in
<<Diary Commands>>, are one and the same **diary text!** Hence, any commands you input to edit the text are reflected into
the edit box automatically, and any edits you make to the edit box are considered by the commands.

The diary text consists of *paragraphs*, which are simply texts separated by new line / return characters.

NOTE: A paragraph of text need not span a minimum length, and can even be empty, as seen in the empty orange boxes
in <<diary_text_line_numbering_figure>>

Additionally, the diary text can use special clauses to display and format images, as described in <<diary_text_displaying_images>>.

[[diary_text_line_numbering]]
===== Diary Text Line Numbering
Each **paragraph** of text as seen in the edit box or diary entry display (with optional accompanying image(s)) is tied to a
specific **line number**. This **line number** is simply determined by the order of the text paragraphs as shown
in <<diary_text_line_numbering_figure>>, from top to bottom.

[[diary_text_line_numbering_figure]]
image::diary/userguide/diary_what_is_a_paragraph.png[title = "Annotated highlights of paragraphs and their line numbers with alternating colours"]

This **line number** is used for several commands described in <<Diary Commands>>.

NOTE: It is trivial if using the edit box to edit text, as text editing is done directly on the **diary text**.

[[diary_text_displaying_images]]
===== Displaying images
There are currently two main formats in which you can display images inside the diary entry display.

Both of them use simple clauses that require the numbering of the photo as displayed in the gallery.

====== As a mini horizontal gallery of images.
** Format: Use a diary **text paragraph** consisting of only the clause `<images number1 number2 numberN>`, where `numberN`
is the index of the photo as displayed in the gallery (<<diary_gallery_display>>).
** Example: `<images 5 1 3 4>` - displays a mini gallery with the images 1, 3 and 5 as shown in the gallery.

image::diary/userguide/diary_mini_gallery_edit_box.png[]

====== As an inline image with an accompanying paragraph of text.
** Format: Use a diary **text paragraph** consisting of your desired text, along with the clause
`<images numberN>`, where `numberN` is the index of the photo as displayed in the gallery <<diary_gallery_display>>.
** By default, the clause will place the image on the right, and the text on the left. You can include the `'left'`
word inside the `<images left numberN>` clause as such to reverse the order.
** Sample usage:

image::diary/userguide/diary_mini_gallery_edit_box.png[]

==== Diary Commands

The diary commands follow the same general format used by the rest of `TravelPal`.

[[diary_create_entry_command]]
===== Creating a diary entry
* `create <dayN>`
** Usage: Creates a new diary entry for the specified day number.
** Arguments:
*** <dayN> - Positive integer nth day of the trip, which has not yet been created.
** Example: `create 8` - creates a new diary entry for day 8 of the trip.

[[diary_flip_command]]
===== Navigating to a diary entry
* `flip <dayN>`
** Usage: Flips the diary to the day number specified.
** Arguments:
*** <dayN> - Positive integer of the nth day's diary entry to flip to.
** Example: `flip 7` - flips to the diary entry of day 7, if it was created.

[[diary_addphoto_command]]
===== Adding a photo
* `addphoto fp/<file path> OR fc/<no arguments> [d/<description>] [dts/<date taken>]`
** Arguments:
*** `fc/` - opens the OS file gui dialog to allow choosing an image, instead of using the file path. This takes precedence
over the `fp/` argument if both are specified.
*** `<file path>` - Relative file path from the location of the application's jar file, or an absolute file path.
*** `<description>` (optional) - The description of the photo to be shown in the gallery, of maximum length 20.
If left unspecified, the file name, truncated to the maximum length is used instead.
*** `<date time>` (optional) - The date taken of the photo, of the format d/M/yyyy HHmm.
If left unspecified, the last modified date of the file is used instead.
** Example: `addphoto fp/snowymountains.jpg d/picturesque mountains`

===== Deleting a photo
* `delphoto <photo number>`
** Usage: Deletes the photo indicated by the specified index in the gallery.
** Arguments:
*** <photo number> - Positive integer number of the photo to delete, as shown by the numbering in the gallery (see <<diary_gallery_display>>).
** Example: `delphoto 1` - Deletes the first photo shown in the gallery.

'''

NOTE: The commands below are quick command line equivalents of editing the text in the edit box, as described in
<<diary_editor_display_mode>>.

===== Appending to a diary entry
* `append <paragraph>`
** Usage: Appends the given paragraph of text to the
** Arguments:
*** <paragraph> - The paragraph of text to append, as described in <<diary_text_info>>.
** Example: `append The scenery on the road was breathtaking.`

===== Inserting text in a diary entry
* `insert i/<lineNumber> d/<paragraph>`
** Usage: Inserts a new paragraph of text at the specified line number.
** Arguments:
*** `<lineNumber>` - Line number to insert the `<paragraph>` at, as described in <<diary_text_line_numbering>>.
*** `<paragraph>` - The paragraph of text to append, as described in <<diary_text_info>>.
** Example: `insert i/10 The food was delicious.`

TIP: If the line number specified is more than the current number of lines the diary entry has, it will quickly add
the required number of new paragraphs and insert the provided text afterward!

===== Editing text in a diary entry
* `edit [i/<lineNumber>] d/<paragraph>`
** Usage: Edits the entire diary text of the diary entry, or a line of text.
** Arguments:
*** `<lineNumber>` (optional) - Line number of the text line to edit, as described in <<diary_text_line_numbering>>.
*** `<paragraph>` - The paragraph of text to edit, as described in <<diary_text_info>>.
** Example: `edit i/10 The food was especially delicious.`

TIP: You can use this as a quick way to clear the entire diary entry's text.

===== Deleting a line of text in a diary entry
* `delete i/<lineNumber>`
** Usage: Deletes the line of text at the specified line number.
** Arguments:
*** `<lineNumber>` - Line number of the text line to delete, as described in <<diary_text_line_numbering>>.
** Example: `delete i/10`

[[diary_editor_command]]
===== Showing the edit box
* `editor`
** Usage: Opens the text editor window and shifts the keyboard focus to it, if it is not already opened.
** Example: `editor`

[[diary_done_command]]
===== Commiting your edits
* `done`
** Usage: Commits the text currently in the edit box to the diary entry.
** Example: `done`

=== Pre-trip Inventory Manager

Allows the user to make a list of things (inventory of things) he/she needs for the trip.

* add <item> : adds an item to the inventory list
* delete <index of item> : deletes the item at the specified index from the inventory list


== General info

====
* Save data:
** The data of the trips is saved in the data directory located in the same directory as where TravelPal.jar is.
** The data is stored in a human readable json format, allowing manual editing of the data files using a seperate text editor.
* Most info, where relevant, can be sent to a printer or saved in pdf format, if the info is needed while travelling without your computer.
** The pdfs are output in the output directory located in the same directory as TravelPal.jar
====
